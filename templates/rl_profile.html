<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kingdom Tracker - Regional Leader</title>
    <link rel="shortcut icon" href="../img/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/crosspoint.css">
    <link rel="stylesheet" href="../css/leader_profile.css">
    <link rel="stylesheet" href="../css/rl.css">
    <link rel="stylesheet" href="../css/rl_profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="light-mode">
    <div class="crosspoint-container">
        <!-- Top Navigation Bar -->
        <nav class="crosspoint-nav">
            <div class="nav-logo">
                <img src="../img/CP%20Logo.jpg" alt="CrossPoint Logo">
                <span>Regional Leader</span>
            </div>

            <ul class="nav-menu">
                <li><a href="../templates/rl_content.html"><i class="fas fa-box-open"></i> Content</a></li>
                <li><a href="../templates/rl_teachings.html"><i class="fas fa-book"></i> Teachings</a></li>
                <li><a href="../templates/rl_prayer.html"><i class="fas fa-hands-praying"></i> Prayer</a></li>
                <li><a href="../templates/rl_bank.html"><i class="fas fa-bank"></i> Food Bank</a></li>
                <li><a href="../templates/rl_reports.html"><i class="fas fa-chart-pie"></i> Reports</a></li>
                <li><a href="../templates/rl_notifications.html"><i class="fas fa-bell"></i> Notifications</a></li>
                <li class="active"><a href="../templates/rl_profile.html"><i class="fas fa-user"></i> Profile</a></li>
            </ul>

            <div class="nav-user">
                <div class="user-dropdown">
                    <img src="../img/user.png" alt="User" class="user-avatar">
                    <span>Regional Admin</span>
                    <i class="fas fa-chevron-down"></i>

                    <div class="dropdown-menu">
                        <a href="../templates/index.html" class="dropdown-item">
                            <i class="fas fa-home"></i> Back to Home
                        </a>
                        <a href="#" class="dropdown-item logout">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </div>

                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="crosspoint-main">
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="../img/user.png" alt="Profile Picture" id="profile-picture">
                    <button class="btn-change-avatar" id="change-avatar">
                        <i class="fas fa-camera"></i> Change
                    </button>
                </div>
                <div class="profile-info">
                    <h1>Regional Leader</h1>
                    <p class="profile-role">Regional Overseer</p>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>Teams managed: <strong>5</strong></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-user-friends"></i>
                            <span>Members under lead: <strong>109</strong></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-tasks"></i>
                            <span>Assignments created: <strong>42</strong></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reports generated: <strong>18</strong></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="profile-nav">
                <button class="profile-nav-btn active" data-section="account">Account Settings</button>
                <button class="profile-nav-btn" data-section="team-management">Team Management</button>
                <button class="profile-nav-btn" data-section="permissions">Permissions & Roles</button>
                <button class="profile-nav-btn" data-section="communication">Communication</button>
                <button class="profile-nav-btn" data-section="password">Password Settings</button>
            </div>

            <!-- Account Settings Section -->
            <div class="profile-section active" id="account-section">
                <h2><i class="fas fa-user-cog"></i> Account Settings</h2>
                <form id="account-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="first-name">First Name</label>
                            <input type="text" id="first-name" name="first_name" value="Regional" required>
                        </div>
                        <div class="form-group">
                            <label for="last-name">Last Name</label>
                            <input type="text" id="last-name" name="last_name" value="Leader" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" value="regional@example.com" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" value="+254712345678" required>
                        </div>
                        <div class="form-group">
                            <label for="county">County</label>
                            <select id="county" name="county" required>
                                <option value="Nairobi" selected>Nairobi</option>
                                <!-- Other Kenyan counties would be here -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="detailed-location">Detailed Location</label>
                            <input type="text" id="detailed-location" name="detailed_location" value="Regional Office" required>
                        </div>
                        <div class="form-group">
                            <label for="marital-status">Marital Status</label>
                            <select id="marital-status" name="marital_status" required>
                                <option value="married" selected>Married</option>
                                <option value="single">Single</option>
                                <option value="divorced">Divorced</option>
                                <option value="widowed">Widowed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth</label>
                            <input type="date" id="dob" name="dob" value="1980-05-15" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Update Account
                    </button>
                </form>
            </div>

            <!-- Team Management Section -->
            <div class="profile-section" id="team-management-section">
                <h2><i class="fas fa-users-cog"></i> Team Management</h2>
                <div class="teams-grid" id="teams-grid">
                    <!-- Teams will be populated by JavaScript from rl.js data -->
                </div>

                <div class="section-divider"></div>

                <h3><i class="fas fa-user-plus"></i> Team Member Management</h3>
                <div class="form-group">
                    <label for="team-select">Select Team</label>
                    <select id="team-select" class="form-control">
                        <option value="">-- Select a team --</option>
                        <option value="1">Northside Team</option>
                        <option value="2">River Valley Team</option>
                        <option value="3">Mountain View Team</option>
                        <option value="4">Lakeside Team</option>
                        <option value="5">Central City Team</option>
                    </select>
                </div>
                <div class="member-management-actions">
                    <button class="btn btn-secondary" id="add-member-btn">
                        <i class="fas fa-user-plus"></i> Add Member
                    </button>
                    <button class="btn btn-secondary" id="remove-member-btn">
                        <i class="fas fa-user-minus"></i> Remove Member
                    </button>
                    <button class="btn btn-secondary" id="manage-roles-btn">
                        <i class="fas fa-user-shield"></i> Manage Roles
                    </button>
                </div>
            </div>

            <!-- Permissions & Roles Section -->
            <div class="profile-section" id="permissions-section">
                <h2><i class="fas fa-user-shield"></i> Permissions & Roles</h2>

                <div class="permissions-card">
                    <h3><i class="fas fa-key"></i> My Permissions</h3>
                    <div class="permissions-list">
                        <div class="permission-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Can manage all regional teams</span>
                        </div>
                        <div class="permission-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Can assign teachings to team leaders</span>
                        </div>
                        <div class="permission-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Can view all regional reports</span>
                        </div>
                        <div class="permission-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Can manage team leaders in region</span>
                        </div>
                        <div class="permission-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Can create regional assignments</span>
                        </div>
                    </div>
                </div>

                <div class="section-divider"></div>

                <h3><i class="fas fa-users-cog"></i> Manage Leader Roles</h3>
                <div class="form-group">
                    <label for="member-select">Select Team Leader</label>
                    <select id="member-select" class="form-control">
                        <option value="">-- Select a leader --</option>
                        <option value="101">Pastor John (Northside Team)</option>
                        <option value="102">Sister Mary (River Valley Team)</option>
                        <option value="103">Brother David (Mountain View Team)</option>
                        <option value="104">Pastor Sarah (Lakeside Team)</option>
                        <option value="105">Elder Michael (Central City Team)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="role-select">Select Role</label>
                    <select id="role-select" class="form-control">
                        <option value="team-leader">Team Leader</option>
                        <option value="sub-regional">Sub-Regional Leader</option>
                        <option value="content-manager">Content Manager</option>
                    </select>
                </div>

                <div class="permissions-checklist">
                    <h4>Specific Permissions:</h4>
                    <div class="form-check">
                        <input type="checkbox" id="perm-content" class="form-check-input" checked>
                        <label for="perm-content" class="form-check-label">Can upload content</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="perm-assign" class="form-check-input" checked>
                        <label for="perm-assign" class="form-check-label">Can assign content</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="perm-reports" class="form-check-input">
                        <label for="perm-reports" class="form-check-label">Can view reports</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="perm-manage" class="form-check-input">
                        <label for="perm-manage" class="form-check-label">Can manage members</label>
                    </div>
                </div>

                <button type="button" class="btn btn-primary" id="save-permissions-btn">
                    <i class="fas fa-save"></i> Save Permissions
                </button>
            </div>

            <!-- Communication Preferences Section -->
            <div class="profile-section" id="communication-section">
                <h2><i class="fas fa-comment-alt"></i> Communication Preferences</h2>

                <div class="notification-settings">
                    <h3><i class="fas fa-bell"></i> Notification Preferences</h3>
                    <div class="form-check">
                        <input type="checkbox" id="notify-prayer" class="form-check-input" checked>
                        <label for="notify-prayer" class="form-check-label">Notify me of team prayer requests</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="notify-assignments" class="form-check-input" checked>
                        <label for="notify-assignments" class="form-check-label">Notify me when assignments are completed</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="notify-weekly" class="form-check-input" checked>
                        <label for="notify-weekly" class="form-check-label">Receive weekly summary emails</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="notify-urgent" class="form-check-input" checked>
                        <label for="notify-urgent" class="form-check-label">Receive urgent notifications via SMS</label>
                    </div>
                </div>

                <div class="section-divider"></div>

                <h3><i class="fas fa-paper-plane"></i> Preferred Communication Method</h3>
                <div class="form-group">
                    <div class="communication-methods">
                        <div class="method-option">
                            <input type="radio" id="method-email" name="communication-method" value="email" checked>
                            <label for="method-email">
                                <i class="fas fa-envelope"></i> Email
                            </label>
                        </div>
                        <div class="method-option">
                            <input type="radio" id="method-inapp" name="communication-method" value="inapp">
                            <label for="method-inapp">
                                <i class="fas fa-mobile-alt"></i> In-App
                            </label>
                        </div>
                        <div class="method-option">
                            <input type="radio" id="method-sms" name="communication-method" value="sms">
                            <label for="method-sms">
                                <i class="fas fa-sms"></i> SMS
                            </label>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn btn-primary" id="save-communication-btn">
                    <i class="fas fa-save"></i> Save Preferences
                </button>
            </div>

            <!-- Password Settings Section -->
            <div class="profile-section" id="password-section">
                <h2><i class="fas fa-lock"></i> Password Settings</h2>
                <form id="password-form">
                    <div class="form-group">
                        <label for="current-email">Email</label>
                        <input type="email" id="current-email" name="email" value="regional@example.com" readonly>
                    </div>
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <div class="password-input-container">
                            <input type="password" id="new-password" name="new_password" required>
                            <i class="fas fa-eye-slash toggle-password" data-target="new-password"></i>
                        </div>
                        <div class="password-strength">
                            <div class="strength-meter">
                                <div class="strength-bar" id="strength-bar"></div>
                            </div>
                            <span class="strength-text" id="strength-text">Weak</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-new-password">Confirm New Password</label>
                        <div class="password-input-container">
                            <input type="password" id="confirm-new-password" name="confirm_new_password" required>
                            <i class="fas fa-eye-slash toggle-password" data-target="confirm-new-password"></i>
                        </div>
                        <div class="password-match" id="password-match"></div>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-key"></i> Reset Password
                    </button>
                </form>
            </div>
        </main>

        <!-- Footer -->
        <footer class="crosspoint-footer">
            <div class="footer-content">
                <img src="../img/ELYASHIB.png" alt="Elyashib Logo" class="footer-logo">
                <span class="footer-text">Powered by Elyashib</span>
            </div>
        </footer>
    </div>

    <!-- Member Management Modal -->
    <div class="modal" id="member-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="member-modal-title">Add Member to Team</h2>
                <button class="modal-close" id="close-member-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="member-search">Search Members</label>
                    <input type="text" id="member-search" placeholder="Type to search...">
                </div>
                <div class="member-search-results" id="member-search-results">
                    <!-- Search results will appear here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="save-member-btn">
                    <i class="fas fa-user-plus"></i> Add Selected
                </button>
                <button type="button" class="btn btn-cancel" id="cancel-member-btn">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div class="modal" id="message-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Message Team Leader</h2>
                <button class="modal-close" id="close-message">&times;</button>
            </div>
            <div class="modal-body">
                <form id="message-form">
                    <div class="form-group">
                        <label>To: <span id="message-recipient">Loading...</span></label>
                        <input type="hidden" id="message-leader-id">
                    </div>
                    <div class="form-group">
                        <label for="message-subject">Subject</label>
                        <input type="text" id="message-subject" placeholder="Enter message subject" required>
                    </div>
                    <div class="form-group">
                        <label for="message-content">Message</label>
                        <textarea id="message-content" rows="6" placeholder="Type your message here..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="message-copy-team">
                            <span>Send copy to entire team</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="send-message">
                    <i class="fas fa-paper-plane"></i> Send Message
                </button>
                <button type="button" class="btn btn-cancel" id="cancel-message">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="confirm-modal-title">Confirm Action</h2>
                <button class="modal-close" id="close-confirm-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirm-modal-message">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="confirm-action-btn">
                    <i class="fas fa-check"></i> Confirm
                </button>
                <button type="button" class="btn btn-cancel" id="cancel-action-btn">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script src="../js/crosspoint.js"></script>
    <script src="../js/rl_profile.js"></script>
</body>
</html>